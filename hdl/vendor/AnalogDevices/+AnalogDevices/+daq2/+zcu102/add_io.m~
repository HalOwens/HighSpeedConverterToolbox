function add_io(hRD,type)

% add AXI4 and AXI4-Lite slave interfaces
% hRD.addAXI4SlaveInterface( ...
%     'InterfaceConnection', 'axi_cpu_interconnect/M13_AXI', ... % ADC DMA BUS
%     'BaseAddress',         '0x43C00000', ...
%     'MasterAddressSpace',  'sys_ps8/Data');
hRD.addAXI4SlaveInterface( ...
    'InterfaceConnection', 'axi_cpu_interconnect/M13_AXI', ... % ADC DMA BUS
    'BaseAddress',         '0x9D000000', ...
    'MasterAddressSpace',  'sys_ps8/Data');


rx_pack_core = 'axi_ad9680_cpack';
rx_data_widths = 64;
rx_ports = 2;
rx_source_core = 'axi_ad9680_core';

tx_upack_core = 'axi_ad9144_upack';
tx_data_widths = 64;
tx_ports = 2;
tx_source_core = 'axi_ad9680_core';

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% RX IO
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
if contains(lower(type),'rx')
    
    %% Valids
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'IP Data Valid OUT', ...
        'InterfaceType',  'OUT', ...
        'PortName',       'dut_data_valid', ...
        'PortWidth',      1, ...
        'InterfaceConnection', [rx_pack_core,'/adc_valid_0'], ...
        'IsRequired',     false);
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'DAQ2 Data Valid IN', ...
        'InterfaceType',  'IN', ...
        'PortName',       'dev_data_valid', ...
        'PortWidth',      1, ...
        'InterfaceConnection', [rx_source_core,'/adc_valid_0'], ...
        'IsRequired',     false);
    %% Data
    for k=0:rx_ports-1
        % DUT outputs
        hRD.addInternalIOInterface( ...
            'InterfaceID',    ['IP Data ',num2str(k),' OUT'], ...
            'InterfaceType',  'OUT', ...
            'PortName',       ['dut_data_',num2str(k)], ...
            'PortWidth',      rx_data_widths, ...
            'InterfaceConnection', [rx_pack_core,'/adc_data_',num2str(k)]', ...
            'IsRequired',     false);
        % DUT inputs
        hRD.addInternalIOInterface( ...
            'InterfaceID',    ['DAQ2 ADC Data I',num2str(k)], ...
            'InterfaceType',  'IN', ...
            'PortName',       ['daq2_adc_data_',num2str(k)], ...
            'PortWidth',      rx_data_widths, ...
            'InterfaceConnection', [rx_source_core,'/adc_data_',num2str(k)], ...
            'IsRequired',     false);
    end
end
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% TX IO
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
if contains(lower(type),'tx')
    
    %% Valids
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'IP Data Valid IN', ...
        'InterfaceType',  'IN', ...
        'PortName',       'dut_data_valid', ...
        'PortWidth',      1, ...
        'InterfaceConnection', [tx_source_core,'/adc_valid_0'], ...
        'IsRequired',     false);
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'DAQ2 Data Valid OUT', ...
        'InterfaceType',  'IN', ...
        'PortName',       'dev_data_valid', ...
        'PortWidth',      1, ...
        'InterfaceConnection', [tx_upack_core,'/adc_valid_0'], ...
        'IsRequired',     false);
    %% Data
    for k=0:rx_ports-1
        % DUT outputs
        hRD.addInternalIOInterface( ...
            'InterfaceID',    ['IP Data ',num2str(k),' OUT'], ...
            'InterfaceType',  'OUT', ...
            'PortName',       ['dut_data_',num2str(k)], ...
            'PortWidth',      rx_data_widths, ...
            'InterfaceConnection', [rx_pack_core,'/adc_data_',num2str(k)]', ...
            'IsRequired',     false);
        % DUT inputs
        hRD.addInternalIOInterface( ...
            'InterfaceID',    ['DAQ2 ADC Data I',num2str(k)], ...
            'InterfaceType',  'IN', ...
            'PortName',       ['daq2_adc_data_',num2str(k)], ...
            'PortWidth',      rx_data_widths, ...
            'InterfaceConnection', [rx_source_core,'/adc_data_',num2str(k)], ...
            'IsRequired',     false);
    end
    
    
    % Reference design interfaces
    % Outputs from generated IP to ADRV9009
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'ADRV9009 DAC Data I0', ...
        'InterfaceType',  'OUT', ...
        'PortName',       'axi_adrv9009_dac_data_i0', ...
        'PortWidth',      32, ...
        'InterfaceConnection', 'axi_adrv9009_core/dac_data_i0', ...
        'IsRequired',     false);
    
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'ADRV9009 DAC Data Q0', ...
        'InterfaceType',  'OUT', ...
        'PortName',       'axi_adrv9009_dac_data_q0', ...
        'PortWidth',      32, ...
        'InterfaceConnection', 'axi_adrv9009_core/dac_data_q0', ...
        'IsRequired',     false);
    
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'ADRV9009 DAC Data I1', ...
        'InterfaceType',  'OUT', ...
        'PortName',       'axi_adrv9009_dac_data_i1', ...
        'PortWidth',      32, ...
        'InterfaceConnection', 'axi_adrv9009_core/dac_data_i1', ...
        'IsRequired',     false);
    
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'ADRV9009 DAC Data Q1', ...
        'InterfaceType',  'OUT', ...
        'PortName',       'axi_adrv9009_dac_data_q1', ...
        'PortWidth',      32, ...
        'InterfaceConnection', 'axi_adrv9009_core/dac_data_q1', ...
        'IsRequired',     false);
    
    % Inputs to generated IP from upack core
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'IP Data 0 IN', ...
        'InterfaceType',  'IN', ...
        'PortName',       'util_dac_unpack_dac_data_00', ...
        'PortWidth',      32, ...
        'InterfaceConnection', 'util_adrv9009_tx_upack/dac_data_0', ...
        'IsRequired',     false);
    
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'IP Data 1 IN', ...
        'InterfaceType',  'IN', ...
        'PortName',       'util_dac_unpack_dac_data_01', ...
        'PortWidth',      32, ...
        'InterfaceConnection', 'util_adrv9009_tx_upack/dac_data_1', ...
        'IsRequired',     false);
    
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'IP Data 2 IN', ...
        'InterfaceType',  'IN', ...
        'PortName',       'util_dac_unpack_dac_data_02', ...
        'PortWidth',      32, ...
        'InterfaceConnection', 'util_adrv9009_tx_upack/dac_data_2', ...
        'IsRequired',     false);
    
    hRD.addInternalIOInterface( ...
        'InterfaceID',    'IP Data 3 IN', ...
        'InterfaceType',  'IN', ...
        'PortName',       'util_dac_unpack_dac_data_03', ...
        'PortWidth',      32, ...
        'InterfaceConnection', 'util_adrv9009_tx_upack/dac_data_3', ...
        'IsRequired',     false);
end
